<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Business Reigns ‚Äî Demo</title>
<style>
body {
  margin: 0;
  background: #000;
  font-family: Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  color: #fff;
}

.app {
  width: 360px; /* —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞ */
  max-width: 100%; /* –∞–¥–∞–ø—Ç–∏–≤ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ */
  height: 720px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 14px;
  box-sizing: border-box;
}

.header {
  text-align: center;
  color: #ccc;
  font-size: 14px;
}

.stats { display: flex; flex-direction: column; gap: 6px; }
.stat { font-size: 12px; color: #ccc; }
.stat-label { display: flex; justify-content: space-between; }
.bar {
  height: 6px;
  background: #222;
  border-radius: 4px;
  overflow: hidden;
  position: relative;
}
.fill { height: 100%; background: #aaa; }
.preview { position: absolute; top: 0; right: 0; height: 100%; opacity: 0.8; }
.plus { background: #27ae60; }
.minus { background: #c0392b; }

.card-wrapper { flex: 1; display: flex; align-items: center; justify-content: center; margin: 8px 0; }
.card {
  background: #fff;
  color: #111;
  border-radius: 16px;
  width: 100%;
  height: 320px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  text-align: center;
  padding: 20px;
  transition: transform 0.25s ease;
  cursor: grab;
  user-select: none;
}

.choices { display: flex; gap: 8px; margin-top: 10px; }
.choice {
  flex: 1;
  background: #fff;
  color: #111;
  font-size: 14px;
  font-weight: bold;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  height: 60px;
}

.gameover { text-align: center; display: flex; flex-direction: column; justify-content: center; height: 100%; gap: 16px; }
.gameover button { padding: 10px; border-radius: 10px; border: none; cursor: pointer; font-size: 14px; }
.share { background: #3498db; color: white; }
.retry { background: #2ecc71; color: white; }

.class-card {
  background: #fff;
  color: #111;
  padding: 16px;
  border-radius: 16px;
  text-align: center;
  font-size: 16px;
  margin-bottom: 12px;
  cursor: pointer;
}

/* ===== MEDIA QUERIES ===== */
@media screen and (max-width: 480px) {
  .app { width: 100%; height: 100%; padding: 10px; }
  .card { height: 50%; font-size: 5vw; }
  .header { font-size: 4vw; }
  .stat { font-size: 3.5vw; }
  .choice { font-size: 4vw; }
  .class-card { font-size: 4.5vw; padding: 12px; }
}
</style>
</head>
<body>
<div class="app" id="app"></div>
<script>
// ===== CLASSES =====
const classes = {
  startup: { title:"üöÄ –°—Ç–∞—Ä—Ç–∞–ø", stats:{cash:40,people:70,image:30,chaos:60} },
  seller: { title:"üõí –°–µ–ª–ª–µ—Ä", stats:{cash:60,people:30,image:40,chaos:50} },
  restaurant: { title:"üçΩ –†–µ—Å—Ç–æ—Ä–∞–Ω", stats:{cash:50,people:60,image:50,chaos:40} }
};

// ===== CARDS =====
const cards = [
  { text:"–î–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º –±–æ–Ω—É—Å?", left:{ e:{cash:-10,people:+5}, r:"–°—ç–∫–æ–Ω–æ–º–∏–ª–∏, –∫–æ–º–∞–Ω–¥–∞ –Ω–µ–¥–æ–≤–æ–ª—å–Ω–∞." }, right:{ e:{cash:-20,people:+15}, r:"–ö–æ–º–∞–Ω–¥–∞ –¥–æ–≤–æ–ª—å–Ω–∞, –¥–µ–Ω—å–≥–∏ –ø–æ—Ç—Ä–∞—á–µ–Ω—ã." }},
  { text:"–ö–ª–∏–µ–Ω—Ç –∂–∞–ª—É–µ—Ç—Å—è –ø—É–±–ª–∏—á–Ω–æ. –û—Ç–≤–µ—Ç–∏—Ç—å?", left:{ e:{image:-10}, r:"–†–µ–ø—É—Ç–∞—Ü–∏—è –ø–æ—Å—Ç—Ä–∞–¥–∞–ª–∞." }, right:{ e:{image:+10,chaos:+5}, r:"–ö–æ–Ω—Ñ–ª–∏–∫—Ç —É–ª–∞–∂–µ–Ω, –Ω–æ –≤—ã –æ—Ç–≤–ª–µ–∫–ª–∏—Å—å." }},
  { text:"–†–∞–∑—Ä–µ—à–∏—Ç—å —É–¥–∞–ª—ë–Ω–∫—É?", left:{ e:{people:-10}, r:"–ö–æ–º–∞–Ω–¥–∞ –Ω–µ–¥–æ–≤–æ–ª—å–Ω–∞." }, right:{ e:{people:+10,chaos:+5}, r:"–ì–∏–±–∫–æ—Å—Ç—å –≤—ã—Ä–æ—Å–ª–∞, –∫–æ–Ω—Ç—Ä–æ–ª—å –æ—Å–ª–∞–±." }},
  { text:"–°—ç–∫–æ–Ω–æ–º–∏—Ç—å –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–µ?", left:{ e:{image:+5}, r:"–ö–ª–∏–µ–Ω—Ç—ã –¥–æ–≤–æ–ª—å–Ω—ã —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å—é." }, right:{ e:{cash:+10,image:-15}, r:"–î–µ–Ω—å–≥–∏ –µ—Å—Ç—å, –¥–æ–≤–µ—Ä–∏–µ —É–ø–∞–ª–æ." }}
];

let stats, days=1, currentCard, cardEl;

// ===== RENDER =====
const app = document.getElementById("app");

function renderClassSelect() {
  app.innerHTML = `
    <div>
      <div style="text-align:center;font-size:18px;margin-bottom:8px;">–í—ã–±–µ—Ä–∏—Ç–µ –±–∏–∑–Ω–µ—Å</div>
      ${Object.keys(classes).map(k=>`
        <div class="class-card" onclick="startGame('${k}')">${classes[k].title}</div>
      `).join("")}
    </div>
  `;
}

function renderGame() {
  app.innerHTML = `
    <div class="header">–î–µ–Ω—å ${days}</div>
    <div class="stats">
      ${stat("üí∞ –î–µ–Ω—å–≥–∏","cash")}
      ${stat("üë• –ö–æ–º–∞–Ω–¥–∞","people")}
      ${stat("üìà –†–µ–ø—É—Ç–∞—Ü–∏—è","image")}
      ${stat("‚öôÔ∏è –ü—Ä–æ—Ü–µ—Å—Å—ã","chaos")}
    </div>
    <div class="card-wrapper">
      <div class="card" id="card">${currentCard.text}</div>
    </div>
    <div class="choices">
      <div class="choice" onmouseenter="hover('left')" onmouseleave="resetCard()" onclick="choose('left')">–ù–ï–¢</div>
      <div class="choice" onmouseenter="hover('right')" onmouseleave="resetCard()" onclick="choose('right')">–î–ê</div>
    </div>
  `;
  cardEl = document.getElementById("card");
  enableDrag();
}

function stat(label,key) {
  return `
    <div class="stat">
      <div class="stat-label"><span>${label}</span><span>${stats[key]}%</span></div>
      <div class="bar" id="bar-${key}"><div class="fill" style="width:${stats[key]}%"></div></div>
    </div>
  `;
}

// ===== GAME LOGIC =====
function startGame(cls) { stats={...classes[cls].stats}; days=1; nextCard(); }
function nextCard() { currentCard=cards[Math.floor(Math.random()*cards.length)]; clearPreview(); renderGame(); }
function choose(side) { const eff=currentCard[side].e; for(let k in eff) stats[k]=Math.max(0,Math.min(100,stats[k]+eff[k])); days++; setTimeout(()=>{ if(Object.values(stats).some(v=>v<=0)) gameOver(); else nextCard(); },300); }

// ===== CARD MOVEMENT =====
function hover(side) { const angle=side==="left"?-10:10; cardEl.style.transform=`translateX(${angle*4}px) rotate(${angle}deg)`; preview(side); }
function resetCard() { cardEl.style.transform="translateX(0) rotate(0)"; clearPreview(); }

// ===== DRAG =====
function enableDrag() {
  let startX=0,dragging=false;
  cardEl.onmousedown=e=>{dragging=true;startX=e.clientX;};
  document.onmouseup=()=>{dragging=false;resetCard();};
  document.onmousemove=e=>{if(!dragging)return;const dx=e.clientX-startX;cardEl.style.transform=`translateX(${dx}px) rotate(${dx/10}deg)`;}
}

// ===== PREVIEW =====
function preview(side){ clearPreview(); const eff=currentCard[side].e; for(let k in eff){ const bar=document.getElementById("bar-"+k); const p=document.createElement("div"); p.className="preview "+(eff[k]>0?"plus":"minus"); p.style.width=Math.abs(eff[k])+"%"; bar.appendChild(p);} }
function clearPreview(){ document.querySelectorAll(".preview").forEach(p=>p.remove()); }

// ===== GAME OVER =====
function gameOver() {
  app.innerHTML=`<div class="gameover">
      <h1>–ë–∏–∑–Ω–µ—Å –∑–∞–∫—Ä—ã–ª—Å—è</h1>
      <p>–í—ã –ø—Ä–æ–¥–µ—Ä–∂–∞–ª–∏—Å—å <b>${days}</b> –¥–Ω–µ–π</p>
      <button class="share" onclick="share()">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
      <button class="retry" onclick="location.reload()">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
  </div>`;
}
function share(){ const text=`–Ø –ø—Ä–æ–¥–µ—Ä–∂–∞–ª—Å—è ${days} –¥–Ω–µ–π –≤ Business Reigns. –ê —Ç—ã?`; if(navigator.share) navigator.share({text}); else alert(text); }

// START
renderClassSelect();
</script>
</body>
</html>
